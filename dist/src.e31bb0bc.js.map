{"version":3,"sources":["index.js"],"names":["Site","siteArr","title","url","desc","loadSites","renderSites","push","window","localStorage","sites","arr","JSON","parse","Array","isArray","index","splice","stringify","content","map","join","$","siblings","remove","end","before","loadBackgroundImage","height","width","console","log","topic","img","Image","src","onload","attr","fadeIn","s","bindEvent","bindAddSiteEvent","bindRemoveSiteEvent","on","e","prompt","addSite","isTouching","isSlided","originX","deltaXRec","LIMIT","left","parseInt","css","Math","abs","touches","clientX","removeClass","curX","deltaX","addClass"],"mappings":"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","file":"src.e31bb0bc.js","sourceRoot":"../src","sourcesContent":["class Site {\n  constructor() {\n    this.siteArr = [\n      {\n        title: \"百度\",\n        url: \"https://www.baidu.com\",\n        desc: \"搜索引擎\",\n      },\n      {\n        title: \"bilibili\",\n        url: \"https://www.bilibili.com\",\n        desc: \"二次元网站\",\n      },\n      {\n        title: \"百度\",\n        url: \"https://www.baidu.com\",\n        desc: \"搜索引擎\",\n      },\n      {\n        title: \"bilibili\",\n        url: \"https://www.bilibili.com\",\n        desc: \"二次元网站\",\n      },\n      {\n        title: \"百度\",\n        url: \"https://www.baidu.com\",\n        desc: \"搜索引擎\",\n      },\n      {\n        title: \"bilibili\",\n        url: \"https://www.bilibili.com\",\n        desc: \"二次元网站\",\n      },\n      {\n        title: \"百度\",\n        url: \"https://www.baidu.com\",\n        desc: \"搜索引擎\",\n      },\n      {\n        title: \"bilibili\",\n        url: \"https://www.bilibili.com\",\n        desc: \"二次元网站\",\n      },\n      {\n        title: \"百度\",\n        url: \"https://www.baidu.com\",\n        desc: \"搜索引擎\",\n      },\n      {\n        title: \"bilibili\",\n        url: \"https://www.bilibili.com\",\n        desc: \"二次元网站\",\n      },\n      {\n        title: \"百度\",\n        url: \"https://www.baidu.com\",\n        desc: \"搜索引擎\",\n      },\n      {\n        title: \"bilibili\",\n        url: \"https://www.bilibili.com\",\n        desc: \"二次元网站\",\n      },\n      {\n        title: \"百度\",\n        url: \"https://www.baidu.com\",\n        desc: \"搜索引擎\",\n      },\n      {\n        title: \"bilibili\",\n        url: \"https://www.bilibili.com\",\n        desc: \"二次元网站\",\n      },\n      {\n        title: \"百度\",\n        url: \"https://www.baidu.com\",\n        desc: \"搜索引擎\",\n      },\n      {\n        title: \"bilibili\",\n        url: \"https://www.bilibili.com\",\n        desc: \"二次元网站\",\n      },\n      {\n        title: \"百度\",\n        url: \"https://www.baidu.com\",\n        desc: \"搜索引擎\",\n      },\n      {\n        title: \"bilibili\",\n        url: \"https://www.bilibili.com\",\n        desc: \"二次元网站\",\n      },\n      {\n        title: \"百度\",\n        url: \"https://www.baidu.com\",\n        desc: \"搜索引擎\",\n      },\n      {\n        title: \"bilibili\",\n        url: \"https://www.bilibili.com\",\n        desc: \"二次元网站\",\n      },\n    ];\n    this.loadSites();\n    this.renderSites();\n  }\n  addSite(title, url, desc) {\n    this.siteArr.push({\n      title,\n      url,\n      desc,\n    });\n    this.renderSites();\n  }\n  loadSites() {\n    if (window.localStorage.sites) {\n      const arr = JSON.parse(window.localStorage.sites);\n      if (Array.isArray(arr)) {\n        this.siteArr = arr;\n      }\n    }\n  }\n  removeSite(index) {\n    this.siteArr.splice(index, 1);\n    this.renderSites();\n  }\n  saveSites() {\n    window.localStorage.sites = JSON.stringify(this.siteArr);\n  }\n  clearCache() {\n    window.localStorage.sites = \"\";\n  }\n  renderSites() {\n    const content = this.siteArr\n      .map(({ title, url, desc }) => {\n        return `\n        <li class=\"site\">\n          <div class=\"site-wrapper\">\n            <div class=\"site-content\">\n              <div class=\"site-head\">\n                <img\n                  src=\"${url}/favicon.ico\"\n                  alt=\"\"\n                  class=\"site-img\"\n                />\n                <span class=\"site-title\">${title}</span>\n              </div>\n              <p class=\"site-desc\">${desc}</p>\n            </div>\n            <div class=\"site-delete-mobile-btn\">删除</div>\n          </div>\n        </li>`;\n      })\n      .join(\"\\n\");\n    $(\".site-list .add-site\").siblings().remove().end().before(content);\n  }\n}\n\nfunction loadBackgroundImage() {\n  const height = $(window).height();\n  const width = $(window).width();\n  console.log(width, height);\n  const topic = \"universe\";\n  const url = `https://source.unsplash.com/${width}x${height}/?${topic}`;\n  const img = new Image();\n  img.src = url;\n  img.onload = () => {\n    $(\"#bgImage\").attr(\"src\", url).fadeIn();\n    console.log(\"loaded\");\n  };\n}\ns = new Site();\nfunction bindEvent() {\n  bindAddSiteEvent();\n  bindRemoveSiteEvent();\n  function bindAddSiteEvent() {\n    $(\".add-site\").on(\"click\", function (e) {\n      const title = window.prompt(\"请输入网站标题\");\n      if (!title) return;\n      const url = window.prompt(\"请输入网站地址\");\n      if (!url) return;\n      const desc = window.prompt(\"请输入网站描述\");\n      if (!desc) return;\n      s.addSite(title, url, desc);\n    });\n  }\n  function bindRemoveSiteEvent() {\n    let isTouching = false;\n    let isSlided = false;\n    let originX;\n    let deltaXRec;\n    const LIMIT = $(\".site-wrapper\").width() / 2;\n    $(\".site-wrapper\")\n      .on(\"touchstart\", function (e) {\n        console.log(\"start\");\n        const left = parseInt($(this).css(\"left\"));\n        isSlided = Math.abs(left) === LIMIT;\n        isTouching = true;\n        originX = e.touches[0].clientX;\n        $(this).removeClass(\"animate\");\n      })\n      .on(\"touchmove\", function (e) {\n        const curX = e.touches[0].clientX;\n        const deltaX = curX - originX;\n        console.log(\"move\", deltaX);\n        console.log(\"isSlide\", isSlided);\n        if (isSlided) {\n          if (deltaX < LIMIT && deltaX > 0) {\n            $(this).css(\"left\", `${-LIMIT + deltaX}px`);\n          }\n        } else {\n          if (deltaX > -LIMIT && deltaX < 0) {\n            $(this).css(\"left\", `${deltaX}px`);\n          }\n        }\n        deltaXRec = deltaX;\n      })\n      .on(\"touchend\", function (e) {\n        isTouching = false;\n        $(this).addClass(\"animate\");\n        // 幅度不够\n        if (Math.abs(deltaXRec) < LIMIT * 0.9) {\n          $(this).css(\"left\", isSlided ? `${-LIMIT}px` : `0px`);\n        } else {\n          $(this).css(\"left\", isSlided ? `0px` : `${-LIMIT}px`);\n        }\n      });\n  }\n}\nbindEvent();\n// loadBackgroundImage();\n"]}